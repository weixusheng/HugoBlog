# C中的野指针


指针指南
<!--more-->

# 指针创建
为了避免出现野指针，通常我们需要将指针初始化为NULL，用完后也为其赋值为NULL。
结构体成员指针往往会被我们忽视，注意它也需要初始化，且需要为结构体指针分配足够的内存，真是就用到了malloc这个宏，使用方法如下：
## 给指针变量赋初值：
```c
方法一：char * p = (char * )malloc(sizeof(char));
方法二：char * p = NULL;
```
## 给数组赋初值：
```c
方法一： int a[10] = {0};
方法二： memset(a, 0, sizeof(a));
```
memset函数有3个参数：第一个是要被设置的内存起始地址；第二个是要被设置的值；第三个是要被设置的内存大小，单位为字节；

## 给结构体指针赋初值：
```
pstu = (struct student *)malloc(sizeof(struct student));
常见错误： pstu = (struct student *)malloc(sizeof(struct student *));
```

# 野指针在debug中的处理
为了避免出现野指针，在程序的debug版本里可以如下处理：
在函数的入口处使用assert(NULL != p)对参数进行校验。或者用if(NULL != p)来校验。它会提醒我们有没有初始化指针，起到定位错误的功能。
assert是个宏，它后面括号里的条件若不满足，则程序终止运行并提示出错。

# 指针销毁
使用完指针后务必记得释放指针所指向的内存，否则不知道什么时候我们又改变了指针的值，使其变成了野指针！
这里就需要**free(p)**这个函数了，它可以切断指针与指向内存的联系。但是需要注意的是free对于同一指针变量只能使用一次。不然会导致出错或者内存泄漏。
释放完内存后另指针的值变为NULL!
```c
free(p);
p = NULL;
```
